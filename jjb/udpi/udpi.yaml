---
#########################################################################
#
# Copyright (c) 2019 Intel and/or its affiliates.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at:
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#########################################################################
- project:
    name: udpi-view
    project-name: udpi
    project: udpi
    views:
      - project-view

- project:
    name: udpi-info
    project-name: udpi
    project: udpi
    jobs:
      - gerrit-info-yaml-verify
    build-node: centos7-builder-2c-2g

- project:
    name: udpi
    project-name: udpi
    project: udpi
    mvn-settings: udpi-settings
    build_script: "checkstyle.sh and build.sh"
    post:build_script: "packagecloud_push"
    build-node: '{os}-builder-4c-4g'
    os:
      - ubuntu1604:
          repo-os-part: 'ubuntu.xenial.main'
      - centos7:
          repo-os-part: 'centos7'
    stream:
      - master:
          branch: 'master'
          repo-stream-part: 'master'
      - '2001':
          branch: 'stable/2001'
          repo-stream-part: 'stable.2001'
    jobs:
      - fdio-freestyle-verify:
        build_script:
          - !include-raw-escape: include-raw-udpi-checkstyle.sh
          - !include-raw-escape: include-raw-udpi-build.sh
      - fdio-freestyle-merge:
        build_script:
          - !include-raw-escape: include-raw-udpi-checkstyle.sh
          - !include-raw-escape: include-raw-udpi-build.sh
        post_build_script: !include-raw-escape: ../scripts/packagecloud_push.sh

- project:
    name: udpi-release
    project: udpi
    project-name: udpi
    build-node: centos7-builder-1c-1g
    jobs:
      - gerrit-packagecloud-release-verify
      - gerrit-packagecloud-release-merge
