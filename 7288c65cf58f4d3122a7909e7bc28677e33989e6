{
  "comments": [
    {
      "key": {
        "uuid": "7cf4d458_1119f451",
        "filename": "jjb/scripts/publish_docs.sh",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1263
      },
      "writtenOn": "2021-09-22T12:18:27Z",
      "side": 1,
      "message": "This looks dangerous.\nIn the Sandbox log I see:\n\n  + pushd ..\n  /w/workspace /w/workspace/csit-docs-merge-master-ubuntu2004-x86_64\n\nThe csit-docs-merge-master-ubuntu2004-x86_64 directory is where CSIT was cloned to, not sure why the terraform commands need to be one level higher.\n\nIt is possible that (since we are using transient executors) there is nothing else in /w/workspace/, but would feel safer with no directory change.",
      "range": {
        "startLine": 46,
        "startChar": 4,
        "endLine": 46,
        "endChar": 12
      },
      "revId": "7288c65cf58f4d3122a7909e7bc28677e33989e6",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65d75681_69f7daa3",
        "filename": "jjb/scripts/publish_docs.sh",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 76
      },
      "writtenOn": "2021-09-22T13:08:27Z",
      "side": 1,
      "message": "There is nothing in that dir as each job runs in separate container (so no collision with others).\nThere are 2 reasons behind:\n- collision in case you have terraform in project main dir (like terraform based project),\n- all jjb scripts are deployed in /w/workspace, thus calling terraform deployed from JJB cannot be done in SCM dir anyhow.\n\nThis is because /w/workspace is main workspace dir for any jenkins job.\nThe fact that we are using project dir is fine for project scripting, but not for job stuff.",
      "parentUuid": "7cf4d458_1119f451",
      "range": {
        "startLine": 46,
        "startChar": 4,
        "endLine": 46,
        "endChar": 12
      },
      "revId": "7288c65cf58f4d3122a7909e7bc28677e33989e6",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee2f19fd_0c7010c1",
        "filename": "jjb/scripts/publish_docs.sh",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 76
      },
      "writtenOn": "2021-09-22T13:11:44Z",
      "side": 1,
      "message": "\u003e The csit-docs-merge-master-ubuntu2004-x86_64 directory is where CSIT was cloned to, not sure why the terraform commands need to be one level higher.\n\nWell but this is ci-man scripting...not CSIT. That is deployed by JJB into /w/workspace as main job dir.",
      "parentUuid": "65d75681_69f7daa3",
      "range": {
        "startLine": 46,
        "startChar": 4,
        "endLine": 46,
        "endChar": 12
      },
      "revId": "7288c65cf58f4d3122a7909e7bc28677e33989e6",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "077713cb_964ed5b6",
        "filename": "jjb/scripts/publish_docs.sh",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1263
      },
      "writtenOn": "2021-09-22T13:32:45Z",
      "side": 1,
      "message": "\u003e This is because /w/workspace is main workspace dir for any jenkins job.\n\nNo. ${WORKSPACE} is the main workspace dir. And from the same Sandbox output you can see ${WORKSPACE} is expands to /w/workspace/{job_name}.\n\n\u003e all jjb scripts are deployed in /w/workspace\n\nNow I see two [1] changes [2] where you started setting PYTHON_SCRIPT with hardcoded /w/workspace in it (instead of ${WORKSPACE}).\n\nI mean, if it works, it works. We can clean up in a later Change.\n\n[1] https://gerrit.fd.io/r/c/ci-management/+/33118\n[2] https://gerrit.fd.io/r/c/ci-management/+/33704",
      "parentUuid": "ee2f19fd_0c7010c1",
      "range": {
        "startLine": 46,
        "startChar": 4,
        "endLine": 46,
        "endChar": 12
      },
      "revId": "7288c65cf58f4d3122a7909e7bc28677e33989e6",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}